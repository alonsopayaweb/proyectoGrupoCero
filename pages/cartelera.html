<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Cartelera</title>
        <link rel="shortcut icon" type="image/png" href="../images/paleta.png"/>

        <!-- Archivo de Bootstrap -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">


        <!-- CSS Propio -->
        <link rel="stylesheet" href="../estilos.css">

    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
            <a class="navbar-brand" href="../index.html">üé® Grupo Cero</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
          
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="../index.html">Inicio <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="gallery.html">Galer√≠a</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Cartelera</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Usuario
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="login.html">Iniciar Sesi√≥n</a>
                            <a class="dropdown-item" href="register.html">Registrarse</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="subirobra.html">Subir Obra</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contacto</a>
                    </li>
                </ul>
                <form class="form-inline my-2 my-lg-0">
                    <input class="form-control mr-sm-2" type="search" placeholder="Buscar Obra" aria-label="Search">
                    <button class="btn btn-outline-light my-2 my-sm-0" type="submit">Buscar</button>
                </form>
            </div>
        </nav>

        <div class="container mt-3">
            <div class="row">
                <div class="col-sm col-md-6">
                    <h2>Cartelera de Cine</h2>
                    <p>Nuestra sede organiza funciones de cine gratuitas para todo p√∫blico.</p>
                    <button type="submit" class="btn btn-primary pull-right mb-3" id="btnPelicula">Ver Cartelera</button>
                </div>
                <div class="col-sm col-md-12">
                    <table id="tblPelicula" class="table table-striped table-dark table-responsive d-none">
                        <thead>
                            <tr>
                                <td>T√≠tulo</td>
                                <td>P√≥ster</td>
                                <td>G√©nero</td>
                                <td>Sinopsis</td>
                            </tr>
                        </thead>
                        <!-- Aqui en tbody colocamos la informacion que traemos de la API -->
                        <tbody id="tbdPelicula" class="table text-light">
                        </tbody>
            
                    </table>
                </div>
            </div>
        </div>

        


        <footer class="container-fluid py-3 bg-primary text-white">
            <p class="d-flex justify-content-center text-center m-0">2021 ¬© Todos los Derechos Reservados</p>
        </footer>

        <!-- Script de Bootstrap -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

        <!-- Script de Cartelera de Cine -->

        <script>
            function obtenerPelicula(id) {
                var linkAPI = 'https://api.themoviedb.org/3/movie/';
                var idPelicula = id;
                var llaveApi = '?api_key=9baf6934936fccf6f1a544c9ee721700&language=es-ES';
                var linkFinal = linkAPI + idPelicula + llaveApi;
                jQuery.getJSON(linkFinal, 
                function(data) {   
                    jQuery('#tbdPelicula').append('<tr><td>'+data.original_title+'</td><td><img src="https://image.tmdb.org/t/p/w200/'+data.poster_path+'" class="img-rounded" /></td><td>'+data.genres[0].name+'</td><td>'+data.overview+'</td></tr>')
                });
                
            }
    
            jQuery(document).ready(function() {

                //PONER LA TABLA COMO ESCONDIDA POR DEFECTO

                jQuery('#btnPelicula').click(function() {
                    $('#tblPelicula').removeClass('d-none'); //Eliminamos la clase display-none para mostrar la tabla
                    $('#btnPelicula').addClass('d-none') //Ocultamos el bot√≥n de pel√≠cula
                    obtenerPelicula(550);
                    obtenerPelicula(238);
                    obtenerPelicula(129);
                    obtenerPelicula(680);
                    obtenerPelicula(423);
                    obtenerPelicula(8587);
                    obtenerPelicula(28);
                    obtenerPelicula(185);
                    obtenerPelicula(694);
                    obtenerPelicula(98);
                    
                });
            });
            
        </script>

    </body>
</html>